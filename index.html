<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Client Cabinet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        --tg-theme-bg-color: #f0f2f5; /* Light gray background */
        --tg-theme-text-color: #1c1e21; /* Dark text */
        --tg-theme-hint-color: #606770; /* Muted text */
        --tg-theme-link-color: #007bff; /* Standard blue link */
        --tg-theme-button-color: #007bff; /* Blue button */
        --tg-theme-button-text-color: #ffffff; /* White button text */
        --tg-theme-secondary-bg-color: #ffffff; /* White for cards */
      }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'tg-bg': 'var(--tg-theme-bg-color, #ffffff)',
              'tg-text': 'var(--tg-theme-text-color, #000000)',
              'tg-hint': 'var(--tg-theme-hint-color, #999999)',
              'tg-link': 'var(--tg-theme-link-color, #2481cc)',
              'tg-button': 'var(--tg-theme-button-color, #5288c1)',
              'tg-button-text': 'var(--tg-theme-button-text-color, #ffffff)',
              'tg-secondary-bg': 'var(--tg-theme-secondary-bg-color, #f1f1f1)',
            },
          },
        },
      }
    </script>
    <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@^2.90.1"
  }
}
</script>
</head>
  <body class="bg-tg-bg text-tg-text">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
      // Logic to apply Telegram theme variables
      try {
        const tg = window.Telegram.WebApp;
        if (tg) {
          // Force the header and background color of the Telegram App frame to match our design
          if (tg.setHeaderColor) tg.setHeaderColor('#f0f2f5');
          if (tg.setBackgroundColor) tg.setBackgroundColor('#f0f2f5');
          
          if (tg.themeParams) {
            const root = document.documentElement;
            
            // NOTE: We intentionally DO NOT map 'bg_color', 'secondary_bg_color', or 'text_color' here.
            // Telegram's default Light theme sends White BG and Gray Secondary BG.
            // We want the opposite (Gray BG, White Cards) to maintain our card-style design.
            // By NOT setting them, we use the CSS :root defaults defined above (#f0f2f5 BG, #ffffff Cards).

            // We ONLY apply dynamic accent colors (buttons, links) from the user's theme.
            root.style.setProperty('--tg-theme-link-color', tg.themeParams.link_color || '#007bff');
            root.style.setProperty('--tg-theme-button-color', tg.themeParams.button_color || '#007bff');
            root.style.setProperty('--tg-theme-button-text-color', tg.themeParams.button_text_color || '#ffffff');
          }
        }
      } catch (e) {
        console.error("Failed to apply Telegram theme", e);
      }
    </script>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>