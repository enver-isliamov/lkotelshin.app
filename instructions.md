
# Инструкция по настройке Google Apps Script API

Это самый надежный способ подключить ваше приложение к Google Таблице. Следуйте этим шагам внимательно.

### Шаг 1: Откройте редактор скриптов

1.  Откройте вашу Google Таблицу.
2.  В верхнем меню выберите `Расширения` (Extensions) -> `Apps Script`.

### Шаг 2: Вставьте код скрипта

1.  Откроется новая вкладка с редактором кода. Полностью **удалите** весь код, который там есть по умолчанию (`function myFunction() { ... }`).
2.  Скопируйте **весь** код из файла `apps_script/Code.js` данного проекта.
3.  Вставьте скопированный код в пустое поле редактора.
4.  Нажмите на иконку дискеты (`Сохранить проект`) вверху.

### Шаг 3: Настройка секретов (Безопасный метод)

Мы сохраним пароли и ID в специальном защищенном хранилище Apps Script, чтобы их не было в коде.

1.  В левом меню редактора нажмите на значок **Шестеренки** ("Настройки проекта").
2.  Прокрутите страницу вниз до раздела **"Свойства скрипта"** (Script Properties).
3.  Нажмите кнопку **"Добавить свойство скрипта"** (Add script property).
4.  Добавьте следующие 3 свойства (имена должны быть точь-в-точь как написано ниже):

    *   **Свойство:** `SPREADSHEET_ID`
        *   **Значение:** ID вашей таблицы (длинный набор символов из URL таблицы).
    *   **Свойство:** `BOT_TOKEN`
        *   **Значение:** Ваш токен от @BotFather.
    *   **Свойство:** `ADMIN_CHAT_ID`
        *   **Значение:** Ваш цифровой ID пользователя Telegram (можно узнать в боте @userinfobot).

5.  Нажмите кнопку **"Сохранить свойства скрипта"**.

### Шаг 4: Создайте лист для конфигурации

1. Вернитесь во вкладку с вашей Google Таблицей.
2. Если листа `Config` еще нет, нажмите на плюсик (`+`), чтобы добавить новый лист.
3. Переименуйте его в `Config`.
4. В ячейку **A1** напишите `Key`.
5. В ячейку **B1** напишите `Value`.

### Шаг 5: Опубликуйте скрипт как веб-приложение

1.  В редакторе Apps Script нажмите синюю кнопку `Развертывание` (Deploy) -> `Новое развертывание` (New deployment).
2.  Нажмите на иконку шестеренки (`Выбрать тип`) -> `Веб-приложение` (Web app).
3.  Заполните поля:
    *   **Описание:** "API Client Cabinet".
    *   **Выполнять как:** `Я` (Me).
    *   **Кто имеет доступ:** `Все` (Anyone). **(Обязательно!)**
4.  Нажмите кнопку `Развернуть` (Deploy) и предоставьте разрешения.

### Шаг 6: Скопируйте URL вашего API

1.  Скопируйте **URL веб-приложения**, который появится после развертывания.
2.  Вставьте этот URL в файл `src/constants.ts` вашего проекта (переменная `APPS_SCRIPT_URL`).

**Примечание:** Если вы изменили код скрипта (файл `Code.js`), не забудьте опубликовать **новую версию** развертывания (Управление развертываниями -> Карандаш -> Версия: Новая).